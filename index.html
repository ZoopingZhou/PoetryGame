<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>å¤è¯—è¯æ¥é¾™</title>
    <link rel="stylesheet" href="/style.css">
    <style>
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
        }
        #game-container {
            display: flex;
            width: 100vw;
            height: 100vh;
        }
        #left-panel {
            width: 280px;
            min-width: 160px;
            max-width: 460px;
            background: #f5f5f8;
            box-sizing: border-box;
            overflow-y: auto;
            transition: background 0.2s;
        }
        #resizer {
            width: 6px;
            cursor: ew-resize;
            background: #ddd;
            height: 100vh;
            z-index: 10;
        }
        #right-panel {
            flex: 1;
            background: #fff;
            overflow-y: auto;
            box-sizing: border-box;
        }
        /* ä¿æŒå…¶ä»–åŸæœ‰æ ·å¼ */
    </style>
</head>
<body>
    <!-- (å¤§å…, æ¸¸æˆå·¦ä¾§é¢æ¿, æˆ¿é—´æœªæ‰¾åˆ°, æ˜µç§°æ¨¡æ€æ¡†ç­‰è§†å›¾ä¿æŒä¸å˜) -->
    <div id="lobby-container">
        <h1>å¤è¯—è¯æ¸¸æˆå¤§å…</h1>
        <div class="lobby-main">
            <div class="room-list-panel">
                <h2>æˆ¿é—´åˆ—è¡¨</h2>
                <ul id="room-list">
                    <li class="no-rooms">æ­£åœ¨åŠ è½½æˆ¿é—´åˆ—è¡¨...</li>
                </ul>
            </div>
            <div class="create-room-panel">
                <h2>æ²¡æœ‰å¿ƒä»ªçš„æˆ¿é—´ï¼Ÿ</h2>
                <button id="create-room-btn" class="create-btn">ç«‹å³åˆ›å»ºæ–°æˆ¿é—´</button>
            </div>
        </div>
    </div>
    <div id="game-container">
        <div id="left-panel">
            <div id="game-info">
                <button id="leave-room-btn" class="leave-btn">é€€å‡ºæˆ¿é—´</button>
                <p>å½“å‰æˆ¿é—´: <strong id="room-name-display"></strong></p>
                <p>å½“å‰èµ·å§‹å­—: <strong id="start-char">?</strong></p>
                <p>æ¸¸æˆçŠ¶æ€: <span id="game-state">è¿æ¥ä¸­...</span></p>
            </div>
            <div id="score-container">
                <h3>ğŸ† åˆ†æ•°æ¦œ</h3>
                <ul id="score-board"></ul>
            </div>
            <div id="queue-container">
                <h3>âŒ›ï¸ ç­‰å¾…éªŒè¯</h3>
                <ul id="queue-list"></ul>
            </div>
        </div>
        <div id="resizer"></div>
        <div id="right-panel">
            <ul id="messages"></ul>
            <div id="char-choice-panel" style="display: none;">
                <div class="panel-header">
                    <h4>æ­å–œï¼è¯·é€‰æ‹©ä¸‹ä¸€ä¸ªèµ·å§‹å­—ï¼š</h4>
                    <p class="timer-display">å‰©ä½™æ—¶é—´: <span id="choice-timer"></span> ç§’</p>
                </div>
                <div id="char-buttons"></div>
            </div>
            <div id="vote-panel" style="display: none;">
                <div class="vote-content">
                    <h4>å¯¹ [ <span id="vote-answer"></span> ] è¿›è¡ŒæŠ•ç¥¨ï¼š</h4>
                    <p>å‰©ä½™æ—¶é—´: <span id="vote-timer"></span> ç§’</p>
                    <div class="button-group">
                        <button id="vote-valid">âœ… åˆæ³•</button>
                        <button id="vote-invalid">âŒ ä¸åˆæ³•</button>
                    </div>
                </div>
                <div class="vote-waiting" style="display: none;">
                    <p>ç­‰å¾…å…¶ä»–ç©å®¶å¯¹ [<strong></strong>] è¿›è¡ŒæŠ•ç¥¨...</p>
                </div>
            </div>
            <!-- ã€æ ¸å¿ƒä¿®æ”¹ã€‘ä¿®æ”¹è¾“å…¥è¡¨å•ç»“æ„ -->
            <form id="form">
                <input id="input" autocomplete="off" placeholder="è¯·è¾“å…¥è¯—å¥..."/>
                <button id="submit-answer-btn" type="submit">å‘é€</button>
                <button id="withdraw-answer-btn" type="button" class="withdraw-form-btn" style="display: none;">æ’¤å›</button>
            </form>
        </div>
    </div>
    <div id="room-not-found-container">
        <div class="panel">
            <h2>æˆ¿é—´ä¸å­˜åœ¨</h2>
            <p>ä½ è®¿é—®çš„æˆ¿é—´ <strong id="invalid-room-id"></strong> ä¸å­˜åœ¨æˆ–å·²è§£æ•£ã€‚</p>
            <div class="button-group">
                <button id="go-to-lobby-btn">è¿”å›å¤§å…</button>
                <button id="create-this-room-btn">åˆ›å»ºè¿™ä¸ªæˆ¿é—´</button>
            </div>
        </div>
    </div>
    <div id="nickname-modal">
        <div id="modal-overlay"></div>
        <div id="modal-content">
            <h2 id="nickname-prompt-title">åŠ å…¥æˆ¿é—´</h2>
            <form id="nickname-form">
                <input id="nickname-input" type="text" autocomplete="off" maxlength="10" required
                    placeholder="è¯·è¾“å…¥ä½ çš„æ˜µç§°" />
                <div class="button-group">
                    <button id="cancel-nickname-btn" type="button" class="cancel-btn">å–æ¶ˆ</button>
                    <button type="submit">ç¡®è®¤</button>
                </div>
            </form>
            <p id="nickname-error" class="error-message"></p>
        </div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script src="/client.js"></script>
    <script>
        // æ‹–åŠ¨åˆ†å‰²çº¿å®ç°
        const leftPanel = document.getElementById('left-panel');
        const resizer = document.getElementById('resizer');
        let isResizing = false;

        resizer.addEventListener('mousedown', function(e) {
            isResizing = true;
            document.body.style.cursor = 'ew-resize';
            // é˜²æ­¢æ‹–åŠ¨æ—¶é€‰ä¸­æ–‡å­—
            document.body.style.userSelect = 'none';
        });

        document.addEventListener('mousemove', function(e) {
            if (!isResizing) return;
            const minWidth = 160;
            const maxWidth = 460;
            let newWidth = e.clientX;
            // é˜²æ­¢æ‹–åˆ°é¡µé¢å¤–
            if (newWidth < minWidth) newWidth = minWidth;
            if (newWidth > maxWidth) newWidth = maxWidth;
            leftPanel.style.width = newWidth + 'px';
        });

        document.addEventListener('mouseup', function() {
            if (isResizing) {
                isResizing = false;
                document.body.style.cursor = '';
                document.body.style.userSelect = '';
            }
        });
    </script>
</body>
</html>